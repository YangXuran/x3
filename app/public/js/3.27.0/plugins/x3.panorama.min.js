/* www.photo.gallery X3.27.0 2019-01-26 */

!function(){function e(e,t,n){k("panorama / "+e,t,n)}var t=!1,n=0;if(window.WebGLRenderingContext)try{var i=document.createElement("canvas");if(i.getContext){var a=i.getContext("webgl")||i.getContext("experimental-webgl");(t=!!(a&&a instanceof WebGLRenderingContext))&&(n=a.getParameter(a.MAX_TEXTURE_SIZE)),e("webgl_support: "+t,null,t?"log":"warn"),e("max_texture_size: "+n)}}catch(t){e("error while trying to detect WebGL",null,"error")}var r,s,l,p,c,u,d,f,h,m,v,g,_,x,w,y,b,z,M,O,C,P,E=x3_settings.plugins.panorama,R="hide"!==E.zoom,j=!1,A=!1,I=E.autorotate_start,T=I&&E.autorotate_restart,q=!1,L=!1,F=0,V=!1,W=!1,N=x3_tests.is_pointer,D=!1,U=[],H={yaw:0,pitch:0,fov:.79},G=window.devicePixelRatio||1,X=window.screen.availWidth*G>=640?640:320;function B(t,i,o){var a=-1,r=0,s={items:[],open:-1};return t.each(function(t,l){var p=$(l);"object"!=typeof p.data("panorama")&&function(t,i){var o=i.data("panorama"),a={},r=!1;o&&"string"==typeof o?o.split("&").forEach(function(e,t){var n=e.split("=");if(n.length>1&&n[1].length){var i=n[1];a[n[0]]=isNaN(i)?"true"===i||"false"!==i&&i:Number(i)}else isNaN(e)?["equirect","cube","flat"].indexOf(e)>-1?a.type=e:e.indexOf("/")>-1||e.match(/\.(jpeg|jpg)$/i)?r=e:a[n[0]]=null:(a.hasOwnProperty("width")?a.hasOwnProperty("height")||(a.height=Number(e)):a.width=Number(e),a.type="equirect")}):o&&"number"==typeof o&&(a.type="equirect",a.width=o),a.hasOwnProperty("type")||(a.hasOwnProperty("width")?a.type=isNaN(a.width)?"flat":"equirect":a.hasOwnProperty("levels")||a.hasOwnProperty("path")?a.type="cube":a.type="equirect");var s="equirect"===a.type?"source":"path",l=a[s]||r||t.getAttribute("data-href")||t.getAttribute("href")||!1;if(l&&(l=l.trim()),l&&(0!==l.toLowerCase().indexOf("http")&&(l.indexOf("content/")>-1?l=x3_settings.path+"/content/"+l.split("content/")[1]:0!==l.indexOf("/")&&(l=x3_settings.path+x3_settings.file_path+"/"+l)),"path"===s&&(l=l.replace(/\.(jpeg|jpg)$/i,""))),a[s]=l?S(l).chompRight("/").s:"none","equirect"===a.type){var p=a.width||i.data("width")||!1,c=a.height||i.data("height")||!1;p&&c||(p?c=Math.floor(p/2):c?p=Math.floor(2*c):(p=4096,c=2048)),a.width=p,a.height=c,p>n&&a.hasOwnProperty("source_4096")&&(null===a.source_4096||!0===a.source_4096)&&(a.source_4096=a.source.replace(/\.(jpeg|jpg)$/i,"_4096.$1"))}else if("flat"===a.type){var u=a.width.split(","),d=a.height.split(",");a.levels=[],u.forEach(function(e,t){a.levels.push({width:parseInt(e),height:parseInt(d[t])})}),delete a.width,delete a.height}e("params_to_object: "+o,a),i.data("panorama",a)}(l,p);var c=p.data("panorama");if(["equirect","cube"].indexOf(c.type)>-1){var u={};Object.keys(H).forEach(function(e){var t=c.hasOwnProperty(e)?c[e]:E[e];t!==H[e]&&(3.14===Math.abs(t)&&(t=Math.PI*(t>0?1:-1)),u[e]=t)});var d=c.hasOwnProperty("maxVFov")?c.maxVFov:E.max_vfov,f=c.hasOwnProperty("maxHFov")?c.maxHFov:E.max_hfov;0===f&&(f=null);var h=c.hasOwnProperty("pitch_min")?c.pitch_min:E.pitch_min,m=c.hasOwnProperty("pitch_max")?c.pitch_max:E.pitch_max,v=(-90!==h||90!==m)&&Marzipano.RectilinearView.limit.pitch(h/180*Math.PI,m/180*Math.PI)}if("equirect"===c.type){var g=c.source.indexOf("/content/")>-1&&0!==c.source.toLowerCase().indexOf("http"),_=c.source,x=c.width;if(x>n)if(n>=4096&&c.hasOwnProperty("source_4096"))_=c.source_4096,x=4096;else{if(!g||!E.equirect_resize)return e("Error: Source ["+_+"] width ["+x+"] is > device max_texture_size ["+n+"] and equirect_resize option is disabled, or source is not in content path.",null,"warn"),o?de(p):p.removeClass("x3-panorama"),!0;_=Mi(_,n),x=n}var w=[{width:x}],y=[_];if(g)if(c.hasOwnProperty("preview")?c.preview:E.equirect_preview){w.unshift({width:X});var b=c.hasOwnProperty("source_4096")?c.source_4096:c.source;y.unshift(Mi(b,X))}var z=c.maxResolution||E.maxres_multiplier*x/4;c.hasOwnProperty("maxResolution")||(c.maxResolution=z);var M=Marzipano.RectilinearView.limit.traditional(z,d,f),O=v?Marzipano.util.compose(M,v):M,C=new Marzipano.ImageUrlSource(function(e){return{url:y[e.z]}}),k=new Marzipano.EquirectGeometry(w),P=new Marzipano.RectilinearView(u,O)}else if("cube"===c.type){C=Marzipano.ImageUrlSource.fromString(c.path+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:c.path+"/preview.jpg"});var R=function(e){if("object"==typeof e)return e;for(var t=256,n=[{tileSize:256,size:256,fallbackOnly:!0}],i=0;i<e;i++)n.push({tileSize:512,size:t*=2});return n}(c.levels||3);k=new Marzipano.CubeGeometry(R),z=c.maxResolution||E.maxres_multiplier*(c.face_size||R[R.length-1].size);c.hasOwnProperty("maxResolution")||(c.maxResolution=z);M=Marzipano.RectilinearView.limit.traditional(z,d,f),O=v?Marzipano.util.compose(M,v):M,P=new Marzipano.RectilinearView(u,O)}else{if("flat"!==c.type)return!0;var j=c.tilesize||E.flat_tile_size,A=c.levels,I=A[A.length-1];C=function(e){var t=e.url_format||E.flat_url_format,n=e.hasOwnProperty("zero_padding")?e.zero_padding:E.flat_zero_padding,i=e.hasOwnProperty("index_start")?e.index_start:E.flat_index_start;return new Marzipano.ImageUrlSource(function(o){return{url:e.path+"/"+t.replace(/{z}|{y}|{x}/gi,function(e){return"{z}"===e?o.z+i:"{y}"===e?S(o.y+i).padLeft(n,"0").s:"{x}"===e?S(o.x+i).padLeft(n,"0").s:void 0})}})}(c);A.forEach(function(e){e.tileWidth=j,e.tileHeight=j}),I.width<A[0].width&&A.reverse();k=new Marzipano.FlatGeometry(A);var T=I.width/I.height,q=window.innerWidth/window.innerHeight,L=T>q?q/T:1;P=new Marzipano.FlatView({mediaAspectRatio:T,zoom:L},Marzipano.util.compose(Marzipano.FlatView.limit.resolution(I.width),Marzipano.FlatView.limit.letterbox()))}if(o&&p.addClass("x3-panorama"),c.index=r,c.hasOwnProperty("id")||(c.id=l.getAttribute("id")||(c.source||c.path).split("/").filter(Boolean).pop().replace(/\.(jpeg|jpg)$/i,"")),c.hasOwnProperty("title")||(c.title=l.getAttribute("data-title")||l.getAttribute("title")||c.id),c.title&&(c.title=c.title.charAt(0).toUpperCase()+c.title.slice(1)),c.exif=!!l.hasAttribute("data-exif")&&JSON.parse(l.getAttribute("data-exif")),c.description||(c.description=l.getAttribute("data-description")),c.date||(c.date=l.getAttribute("data-date")),c.geo){var F=c.geo.split(",");F.length>2&&(c.geo=F[0]+","+F[1],c.geo_zoom||(c.geo_zoom=parseInt(F[2])))}else c.geo=l.getAttribute("data-geo");-1===s.open&&(i===c.id?s.open=r:-1===a&&c.hasOwnProperty("open")&&(i?a=r:s.open=r)),c.scene_ob={source:C,geometry:k,view:P,pinFirstLevel:!!c.pinFirstLevel},c.original_view=P.parameters(),s.items.push(c),r++}),-1===s.open&&(s.open=a),e("pano_data ["+(o?"content":"gallery")+"]:",s),s}function K(e,t,n){if(j)return!1;j=!0,r=e,F=t,_e(!0);var i=r.items[t],o=E.scene_nav?r.items.length:1;o>1?r.items.forEach(function(e,t){e.scene=s.createScene(e.scene_ob)}):i.scene=s.createScene(i.scene_ob),E.reset_view&&i.scene_ob.view.setParameters(i.original_view),E.scene_nav&&w.toggleClass("hide",o<=1),E.index&&v.toggleClass("hide",o<=1),ee(i,o),c.velocity("fadeIn",{duration:200,complete:function(){s.updateSize(),function(){if(!x3_tests.ios)return;Sc.on("orientationchange.pano",function(e){var t=u[0].clientWidth,n=u[0].clientHeight;setTimeout(function(){u[0].clientWidth===t&&u[0].clientHeight===n||s.updateSize()},500)})}(),function(){if(!x3_tests.dual_input)return;var e;Lc.on("touchend.pano",function(t){D=!0,clearTimeout(e),e=setTimeout(function(){D=!1},300)})}(),i.scene.switchTo({transitionDuration:Me,transitionUpdate:be()},function(){!function(){x3_tests.mobile?f.add(h).addClass("pano-touch"):f.add(h).on("mouseenter.pano mouseleave.pano",function(e){$(this).toggleClass("pano-hover","mouseenter"===e.type)});if(!E.hide_interface)return void pe(!1);ue(),u.on("mousemove.pano",$.throttle(Math.floor(E.hide_interface_timeout/10),!1,ue)),x3_tests.touch&&(ce(f),ce(h))}(),(I||T)&&ie(!0),s.stage().addEventListener("renderComplete",ge),function(){if("auto"!==E.zoom||!N)return;Sc.on("resize.pano",$.debounce(500,function(e){Y(r.items[F])}))}(),he(i,o)}),V=n||bi("pano")!=i.id&&!navigator.userAgent.match("CriOS"),history.pushState(null,i.id,"#pano="+i.id),Sc.one("popstate.pano",function(e){Z(!1)}),function(e){Lc.on("keydown.pano",function(e){[32,38,40].indexOf(e.which)>-1&&e.preventDefault()}),E.keyboard&&Re.length&&(Ee=!1,_.find(".active").removeClass("active"),Lc.on("keydown.pano",function(t){var n=t.which;if(Ee!==n){if(t.shiftKey&&e>1&&E.nav&&[37,39].indexOf(n)>-1)return!1;Ee=n,je(n,!0)}}));E.keyboard&&Lc.on("keyup.pano",function(t){var n=t.which;if(t.shiftKey&&e>1&&[37,39].indexOf(n)>-1)J(37===n?-1:1);else{if(27===n)return void Z(!0);if(32===n)return pe(!se),void(se&&f.add(h).removeClass("pano-hover"))}Re.length&&je(n,!1)})}(o)}})}function Z(e){if(!j)return!1;j=!1,E.autorotate_start?ae():ie(!1),[Sc,Lc,u,d,f,h].forEach(function(e){e.length&&e.off(".pano")}),V?e&&history.back():history.replaceState(null,document.title,location.pathname+location.search),A&&screenfull.exit(),c.velocity("fadeOut",{duration:200,complete:function(){_e(!1),s.destroyAllScenes(),s.stage().removeEventListener("renderComplete",ge),ge(!0),pe(!0),f.add(h).removeClass("pano-hover")}})}function J(e){var t=F+e,n=r.items.length;if(t<0||t>=n){if(!E.scene_loop)return;t=t<0?n-1:0}F=t;var i=r.items[F];E.reset_view&&i.scene_ob.view.setParameters(i.original_view),E.title&&"0"!=f.css("opacity")&&m.css("display","none"),n>1&&N&&z.add(M).css("display","none"),ee(i,n),le&&E.show_interface_after_nav&&ue(),ae(),"opacity"!==we&&i.scene.layer().setEffects({opacity:0}),i.scene.switchTo({transitionDuration:ze,transitionUpdate:ye()},function(){I?oe():T&&ie(!0),E.title&&!m.is(":visible")&&Q(m,!0,3*e,300),n>1&&N&&!D&&(y.is(":hover")&&Q(z,!0,3*e,200),b.is(":hover")&&Q(M,!0,3*e,200)),E.show_interface_after_nav&&(!E.hide_interface&&E.keyboard?pe(!1):se&&ue()),he(i,n)}),history.replaceState(null,i.id,"#pano="+i.id)}function Q(e,t,n,i,o){e.velocity("stop").velocity({opacity:t?[1,0]:[0,1],translateX:t?[0,n]:[n,0]},{duration:i||300,easing:"easeOutQuint",display:t?o||"auto":"none"})}function Y(e){if("auto"===E.zoom&&N){var t=e.hasOwnProperty("zoom")?e.zoom:"flat"===e.type||e.maxResolution>window.innerWidth*G;x.toggleClass("pano-zoom-hidden",!t)}}function ee(e,t){var n=!!(e.exif||e.description||e.geo);if(P.length&&P.toggleClass("hide",!n),E.title&&g.toggleClass("pano-title-info",n),C.length&&C.toggleClass("hide","flat"===e.type),O.data("visible")&&O.toggleClass("hide","flat"===e.type),Y(e),E.scene_nav&&t>1){var i=F<=0?t-1:F-1,o=F>=t-1?0:F+1,a=!1,s=!1;E.scene_loop||(a=i>=F,y.toggleClass("hide",a),s=o<=F,b.toggleClass("hide",s),N&&(z.toggleClass("hide",a),M.toggleClass("hide",s))),N&&(a||z.html(r.items[i].title),s||M.html(r.items[o].title))}E.index&&t>1&&v.text(F+1+" / "+t),E.title&&g.html(e.title)}e("Settings:",E),wi.panorama.init_page=function(e,n){var i=e.is(".context");if(t){var o=B(n,!j&&bi("pano"),i);o.items.length&&(e.on("click",".x3-panorama",function(e){e.stopImmediatePropagation(),e.preventDefault(),K(o,$(this).data("panorama").index,!0)}),j||(o.open>-1?K(o,o.open):E.auto_open&&!i&&K(o,0)))}else i?n.each(function(e,t){de($(t))}):n.removeClass("x3-panorama")},wi.panorama.init_pano=function(){if(t){!function(){var e="",t="";(E.buttons?(E.buttons+",close").replace("close,","").split(","):["close"]).forEach(function(e,n){t+='<button type="button" class="pano-button pano-'+e+(["deviceorientation","fullscreen"].indexOf(e)>-1?" hide":"")+'"></button>'}),e+='<div class="pano-controls">'+t+"</div>";var n="";E.index&&(n+='<span class="pano-index"></span>'),E.title&&(n+='<span class="pano-title"></span>'),(n+='<span class="pano-spinner"></span>')&&(e+='<div class="pano-text">'+n+"</div>"),e&&(e='<div class="pano-topbar">'+e+"</div>");var i="";E.scene_nav&&(i+='<div class="pano-scene-nav"><button type="button" class="pano-button pano-previous"></button><div class="pano-text pano-title-previous"></div><button type="button" class="pano-button pano-next"></button><div class="pano-text pano-title-next"></div></div>');var o="";R&&(o+='<div class="pano-zoom"'+(E.nav?' style="margin-right: 1em;"':"")+'><button type="button" class="pano-button pano-zoom-out"></button><button type="button" class="pano-button pano-zoom-in"></button></div>'),E.nav&&(o+='<button type="button" class="pano-button pano-left"></button><div class="pano-up-down"><button type="button" class="pano-button pano-up"></button><button type="button" class="pano-button pano-down"></button></div><button type="button" class="pano-button pano-right"></button>'),o&&(i+='<div class="pano-nav">'+o+"</div>"),i&&(e+='<div class="pano-bottombar">'+i+"</div>"),e&&(e='<div id="pano-interface" class="pano-interface-hide'+(N?" pano-pointer":"")+'">'+e+"</div>"),Lc.append('<div id="pano-container">'+e+'<div id="pano"></div></div>')}(),c=Lc.find("#pano-container"),u=c.find("#pano"),d=c.find("#pano-interface");var e=(f=d.find(".pano-topbar")).find(".pano-controls");O=e.find(".pano-deviceorientation"),m=f.find(".pano-text"),v=m.find(".pano-index"),g=m.find(".pano-title"),me=m.find(".pano-spinner"),h=d.find(".pano-bottombar"),_=h.find(".pano-nav"),x=_.find(".pano-zoom"),w=h.find(".pano-scene-nav"),y=w.find(".pano-previous"),z=w.find(".pano-title-previous"),b=w.find(".pano-next"),M=w.find(".pano-title-next");var n=(R?89:0)+(E.nav?134:0);if(n){R&&E.nav&&(n+=16);var i=Math.round(n/2+60);E.scene_nav&&o("@media (min-width: 641px) { .pano-title-previous, .pano-title-next { max-width: calc(50% - "+i+"px); } }"),R&&E.nav&&(o("@media (min-width: 1025px) { .pano-nav { margin-left: -106px; } }"),E.scene_nav&&(o("@media (min-width: 1025px) { .pano-title-previous { max-width: calc(50% - "+(i+53)+"px); } }"),o("@media (min-width: 1025px) { .pano-title-next { max-width: calc(50% - "+(i-53)+"px); }")))}if(s=new Marzipano.Viewer(u[0]),E.nav&&U.push([_.find(".pano-up"),"y",-.5,.75],[_.find(".pano-down"),"y",.5,.75],[_.find(".pano-left"),"x",-1],[_.find(".pano-right"),"x",1]),R&&U.push([_.find(".pano-zoom-in"),"zoom",-1],[_.find(".pano-zoom-out"),"zoom",1]),E.keyboard&&U.push([38,"y",-.5,.75],[40,"y",.5,.75],[37,"x",-1],[39,"x",1],[187,"zoom",-1],[189,"zoom",1],[107,"zoom",-1],[109,"zoom",1],[87,"y",-.5,.75],[65,"x",-1],[83,"y",.5,.75],[68,"x",1],[81,"roll",-4,6],[69,"roll",4,6]),U.length){l=s.controls(),U.forEach(function(e,t){var n=.4*e[2],i=1.2*(e[3]||1),o="number"==typeof e[0]?new Marzipano.KeyControlMethod(e[0],e[1],n,i):new Marzipano.ElementPressControlMethod(e[0][0],e[1],n,i);l.registerMethod("c"+t,o,!0)})}var a=e.find(".pano-close");a.length&&a.on("click",function(e){Z(!0)}),(P=e.find(".pano-info")).length&&P.on("click",H),E.title&&g.on("click",function(e){$(this).hasClass("pano-title-info")&&H()});var k=e.find(".pano-reset-view");k.length&&k.on("click",function(e){k.data("translating")||(k.data("translating",!0),s.lookTo(r.items[F].original_view,{transitionDuration:500},function(){k.data("translating",!1)}))});var S=Marzipano.dependencies.hammerjs,j=e.find(".pano-fullscreen");(E.fullscreen_taps||j.length)&&vi("screenfull",function(e){if(!e)return j.remove(),!1;(j.removeClass("hide").on("click",function(){screenfull.toggle()}),E.fullscreen_taps)&&new S(u[0]).on(1===E.fullscreen_taps?"tap":"doubletap",function(e){A||screenfull.request()});function t(){A=screenfull.isFullscreen,j.toggleClass("pano-is-fullscreen",A)}screenfull.on("change",t),t()}),(C=e.find(".pano-rotate")).length&&C.on("click",function(){ie(!I)});var T=E.autorotate_speed;if(p=Marzipano.autorotate({yawSpeed:T,yawAccel:T/2,pitchSpeed:Math.max(T,.1),pitchAccel:Math.max(T/2,.05)}),E.lookto_taps){function q(e,t,n){var i=s["_hammerManager"+e];i.manager().add(new S.Tap({taps:t,posThreshold:n})),i.on("tap",function(e){var t=s.view().screenToCoordinates(e.center);s.lookTo(t,{transitionDuration:500})})}N&&q("Mouse",E.lookto_taps,20),x3_tests.touch&&q("Touch",E.lookto_taps,50)}if(O.length)if(x3_tests.device_orientation){function V(){vi("DeviceOrientationControlMethod",function(e){if(!e)return O.remove(),!1;l.registerMethod("deviceOrientation",new DeviceOrientationControlMethod),O.removeClass("hide").data("visible",!0).on("click",function(e){ne(!L)})})}x3_tests.device_oriented?V():Sc.one("deviceorientation.panotest",function(e){var t=e.originalEvent.alpha;null===t||isNaN(t)||V()})}else O.remove();if(E.scene_nav){function W(e,t,n){e.on("click",$.throttle(500,!0,function(){J(n)})),N&&e.on("mouseenter mouseleave",function(e){D||Q(t,"mouseenter"===e.type,3*n)})}W(y,z,-1),W(b,M,1)}}function H(){var e=r.items[F],t=!1,n='<h2 class="pano-info-title">'+e.title+"</h3>";if(e.date&&(n+='<time class="pano-info-date">'+e.date+"</time>"),e.exif&&(n+='<div class="pano-info-exif">'+oo(e.exif)+"</div>"),e.description&&(n+='<p class="pano-info-description">'+e.description+"</p>"),e.geo){var i=document.documentElement.clientWidth;if(i<=640)t=Math.min(100*Math.ceil(i/100),640);else{var o=document.documentElement.clientHeight;t=o<800?400:o<950?500:640}n+='<a href="https://www.google.com/maps/search/?api=1&amp;query='+e.geo+'" class="pano-info-map" target="_blank"><div class="pano-info-map-container"><img src="https://maps.googleapis.com/maps/api/staticmap?'+(x3_tests.pixel_ratio>1?"scale=2&amp;":"")+"zoom="+(e.geo_zoom||12)+"&amp;size="+t+"x"+t+"&amp;markers="+e.geo+'&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk" class="pano-info-map-image"></div></a>'}var a=gc(n,t,"pano-info-modal");if(e.geo){var s=a.find(".pano-info-map-image");s.on("load",function(e){s.css({opacity:1,transform:"scale(1)"})}),a.find(".pano-info-map").on("click",function(t){gi("https://www.google.com/maps/embed/v1/place?q="+e.geo+"&amp;key=AIzaSyDRp6xla9SxUmTBu6l_kprhjjI9e5-EVZk",t).css("z-index",1542)})}}};var te=!1;function ne(e){L!==e&&(L=e,O.toggleClass("pano-is-deviceorientation",e),e?(te=I,ie(!1),l.enableMethod("deviceOrientation")):(l.disableMethod("deviceOrientation"),te&&ie(!0)))}function ie(e){q!==e&&(I=e,C.toggleClass("pano-rotating",e),e?oe():ae())}function oe(){q||(ne(!1),s.startMovement(p),s.setIdleMovement(E.autorotate_idlemovement_timeout,p),q=!0)}function ae(){q&&(s.stopMovement(),s.setIdleMovement(1/0),q=!1)}var re,se=!0,le=!1;function pe(e){le&&(le=!1,clearTimeout(re)),se!==e&&(se=e,d.toggleClass("pano-interface-hide",e))}function ce(e){e.length&&e.on("touchstart.pano",".pano-button",function(t){if("1"!=e.css("opacity"))return!1})}function ue(){pe(!1),le=!0,re=setTimeout(function(){pe(!0)},E.hide_interface_timeout)}function de(e){var t=e.attr("data-href")||e.attr("href");t&&t.indexOf(".")>-1&&e.attr({"data-popup":"",rel:"pano-replacement-popup",href:(-1===t.indexOf("/")?x3_page.file_path+"/":"")+t.trim()})}function fe(t){var n=r.items[t];n.scene_ob.pinFirstLevel||n.scene_ob.geometry.levelList.length<2||!s.hasScene(n.scene)||(e("pinFirstLevel: "+n.id),n.scene.layer().pinFirstLevel(),n.scene_ob.pinFirstLevel=!0)}function he(e,t){t<2||setTimeout(function(){s.hasScene(e.scene)&&e.scene.visible()&&(fe(F>=t-1?0:F+1),fe(F<=0?t-1:F-1))},2e3)}var me,ve=!1;function ge(e){ve===e&&(ve=!ve,me.toggleClass("pano-spinning",ve))}function _e(e){e!==W&&(e?(W=window.innerWidth-document.documentElement.clientWidth)&&(Pc[0].style["padding-right"]=W+"px",Rc[0].style.overflow="hidden"):(Pc[0].style.removeProperty("padding-right"),Rc[0].style.removeProperty("overflow"),W=!1))}var xe={opacity:function(){return function(e,t){var n=Pe(e),i={opacity:n};Ce&&(i.rect=Ce(n)),t.layer().setEffects(i)}},black:function(){return function(e,t,n){var i=Pe(e),o=i<.5,a=o?2*i:1-2*(i-.5),r=o?n.layer():t.layer(),s={colorOffset:[-a,-a,-a,0]};!o&&Ce&&(s.rect=Ce(i)),r.setEffects(s)}},black_first:function(){return function(e,t){var n=Pe(e),i=1-n,o={colorOffset:[-i,-i,-i,0]};Ce&&(o.rect=Ce(n)),t.layer().setEffects(o)}}},we=E.transition,ye=xe[we],be="black"===we?xe.black_first:ye,ze=E.transition_duration,Me="black"===we?ze/2:ze,Oe=E.transition_scale;if(Oe&&ze)var Ce=function(e){return{relativeWidth:ke-e*Oe,relativeHeight:ke-e*Oe,relativeX:e*Se-Se,relativeY:e*Se-Se}},ke=1+Oe,Se=Oe/2;else Ce=!1;function Pe(e){return-(Math.pow(e-1,4)-1)}var Ee=!1,Re=(E.nav?[38,40,37,39]:[]).concat(R?[187,189]:[]);function je(e,t){var n=Re.indexOf(e);if(n>-1){if(t&&"1"!=h.css("opacity"))return;Ee=!1,U[n][0].toggleClass("active",t)}}}();